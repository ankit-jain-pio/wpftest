<UserControl x:Class="SimpleWpfMvvmAppV8.Views.AddEditProductPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ScrollViewer>
        <Grid Margin="20" MaxWidth="600">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
                <TextBlock Text="{Binding PageTitle}" FontSize="24" FontWeight="Bold"/>
                <Button Content="? Back to Products" Command="{Binding BackToProductsCommand}" 
                        Margin="20,0,0,0" Padding="10,5"/>
            </StackPanel>
            
            <!-- Form -->
            <StackPanel Grid.Row="1">
                <TextBlock Text="Product Name:" FontWeight="Bold"/>
                <TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" Margin="0,5,0,15"/>
                
                <TextBlock Text="SKU:" FontWeight="Bold"/>
                <TextBox Text="{Binding SKU, UpdateSourceTrigger=PropertyChanged}" Margin="0,5,0,15"/>
                
                <TextBlock Text="Price:" FontWeight="Bold"/>
                <TextBox Text="{Binding Price, UpdateSourceTrigger=PropertyChanged}" Margin="0,5,0,15"/>
                
                <TextBlock Text="Description:" FontWeight="Bold"/>
                <TextBox Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}" 
                         TextWrapping="Wrap" AcceptsReturn="True" Height="80" Margin="0,5,0,15"/>
                
                <TextBlock Text="Image:" FontWeight="Bold"/>
                <StackPanel Orientation="Horizontal" Margin="0,5,0,15">
                    <TextBox Text="{Binding ImagePath, UpdateSourceTrigger=PropertyChanged}" 
                             Width="300" IsReadOnly="True"/>
                    <Button Content="Browse..." Command="{Binding BrowseImageCommand}" 
                            Margin="10,0,0,0" Padding="10,5"/>
                </StackPanel>
                
                <!-- Image Preview -->
                <Border BorderBrush="Gray" BorderThickness="1" Width="200" Height="150" 
                        HorizontalAlignment="Left" Margin="0,0,0,15" Background="LightGray">
                    <Grid>
                        <!-- Actual Image -->
                        <Image Source="{Binding FullImagePath}" Stretch="Uniform">
                            <Image.Style>
                                <Style TargetType="Image">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding FullImagePath}" Value="">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding FullImagePath}" Value="{x:Null}">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                        </Image>
                        
                        <!-- Placeholder when no image -->
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <StackPanel.Style>
                                <Style TargetType="StackPanel">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding FullImagePath}" Value="">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding FullImagePath}" Value="{x:Null}">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </StackPanel.Style>
                            <TextBlock Text="??" FontSize="32" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock Text="No Image" FontSize="12" Foreground="Gray" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Border>
                
                <!-- Image Path Info -->
                <TextBlock Text="{Binding FullImagePath, StringFormat='Full Path: {0}'}" 
                           FontSize="10" Foreground="Gray" Margin="0,0,0,15" TextWrapping="Wrap"/>
            </StackPanel>
            
            <!-- Actions -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,20,0,0">
                <Button Content="{Binding ButtonText}" Command="{Binding SaveProductCommand}" 
                        Padding="15,8" Margin="0,0,10,0" Background="DodgerBlue" Foreground="White"/>
                <TextBlock Text="{Binding Message}" Foreground="{Binding MessageForeground}" 
                           VerticalAlignment="Center" Margin="10,0,0,0"/>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</UserControl>